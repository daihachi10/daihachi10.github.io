<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    <script src="./js/config.js"></script>
    <script src="./js/log.js"></script>
    <script src="./js/index.js"></script>

</head>

<body>
    <main>
    </main>
    <script src="sketch.js"></script>
</body>
<h>コード</h>
<pre>
    let keys = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
    let keycode = [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90]
    let hyouka = ["D", "C", "B", "A", "S"]
    let randoms = Math.floor(Math.random() * 26);
    let ok = 0;
    let ng = 0;
    let x = 0;
    let speed = 0.5;
    let kankaku = 0;
    let keySound1;
    let game = true;
    
    function preload() {
        keySound1 = loadSound('https://daihachi10.github.io/typing/assets/sound_assets/typing_sound.mp3');
    }
    
    function setup() {
        createCanvas(400, 400);
    }
    
    function draw() {
        background(220);
        texts();
        if (keyIsPressed === true) {
            runs();
        }
        character();
        speedBar();
        speedBarText();
        gameOverLine();
    }
    
    function runs() {
        if (keyIsDown(keycode[randoms])) {
            keySound1.play();
            ok++;
            x = 0;
            speed = speed + 0.25;
            console.log("\"" + keys[randoms] + "\" key pressed");
            randoms = Math.floor(Math.random() * 26);
        } else {
            ng++;
        }
        console.log("タイプ数(ミスなし):" + ok + "回");
    }
    
    function texts() {
        fill("white");
        rect(width / 2 - 200, height / 2 - 30, 400, 50);
        fill("black");
        textSize(15);
        text(("タイプ数(ミスなし):" + ok + "回"), 0, 15);
        textSize(20);
        text(keys[randoms] + " key press!", 150, 200);
    }
    
    function character() {
        fill("whilte");
        rect(x + 1, 369, 30, 30);
        x = x + speed;
        if (x >= 365) {
            gameOver();
        }
    }
    
    function speedBar() {
        fill("white")
        rect(165, 10, 230, 2);
        ellipse(160 + speed * 18, 11, 10, 10);
    }
    
    function speedBarText() {
        fill("black");
        textSize(15)
        kankaku = 0;
        for (let i = 0; i < 5; i += 1) {
            line(185 + kankaku, 5, 185 + kankaku, 20);
            text(hyouka[i], 180 + kankaku, 35);
            kankaku += 45
        }
    }
    
    function gameOverLine() {
        fill("black");
        line(395, 360, 395, 390);
        textSize(15);
        fill("red");
        text("GameOverLine", 290, 355);
        fill("defolt");
    }
    
    function gameOver() {
        game = false
        noLoop();
    }
    
    function keyPressed() {
        if (keyIsDown(27)) {
            noLoop();
        } else if (keyIsDown(13) && game == true) {
            loop();
        }
    }
</pre>
<<a href="https://otologic.jp/">©otologic/</a>
</html>
